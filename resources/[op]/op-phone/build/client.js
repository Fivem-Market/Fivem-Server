(()=>{"use strict";var e={d:(n,t)=>{for(var a in t)e.o(t,a)&&!e.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:t[a]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};e.d({},{s:()=>oe});const n=JSON.parse('{"cJ":{"am":true,"yO":"op-inventory","SN":"hasPhone"},"Cg":{"x":"L","Z":"phone"},"Wc":{"T":"jpg","V":["data","createScreenshot","url"]}}');var t,a,o;!function(e){e.LSMC_CALL="emergency:LSMCCall",e.UHU_CALL="emergency:UHUCall",e.SET_EMERGENCY="emergency:setEmergency",e.SET_DEAD="emergency:setDead"}(t||(t={})),function(e){e.OPEN_APP="phone:openApp",e.OPEN_PHONE="phone:open",e.CLOSE_PHONE="phone:close",e.UNLOAD_CHARACTER="phone:unloadCharacter",e.SET_AVAILABILITY="phone:setAvailability",e.SET_VISIBILITY="phone:setVisibility",e.ADD_SNACKBAR_ALERT="phone:setSnackarAlert",e.SET_NUMBER="phone:setNumber",e.SET_SOCIETY_NUMBER="phone:setSocietyNumber",e.SET_PHONE_READY="phone:phoneReady",e.SET_CONFIG="phone:setPhoneConfig",e.SET_TIME="phone:setGameTime",e.SEND_CREDENTIALS="phone:sendCredentials",e.FETCH_CREDENTIALS="phone:getCredentials",e.TOGGLE_KEYS="phone:toggleAllControls",e.SET_PLAYER_LOADED="phone:setPlayerLoaded"}(a||(a={})),function(e){e.SERVER_ERROR="GENERAL_SERVER_ERROR",e.DELETE_FAILED="DELETE_FAILED",e.ADD_FAILED="ADD_FAILED",e.UPDATE_FAILED="UPDATED_FAILED",e.FETCH_FAILED="FETCH_FAILED"}(o||(o={}));const l={DIALER:"DIALER",MESSAGES:"MESSAGES",NOTES:"NOTES",CONTACTS:"CONTACTS",CAMERA:"CAMERA",PHOTO:"PHOTO",SOCIETIES:"SOCIETIES",SOCIETY_MESSAGES:"SOCIETY_MESSAGES",TWITCH_NEWS:"TWITCH_NEWS"};function E(e,n,t){return SendNUIMessage({app:e,method:n,data:t})}function s(e,n={}){return E(l.MESSAGES,e,n)}function i(e,n={}){return E(l.NOTES,e,n)}function r(e,n={}){E(l.CONTACTS,e,n)}function S(e,n={}){E(l.PHOTO,e,n)}function c(e,n={}){E(l.DIALER,e,n)}const C=e=>new Promise((n=>setTimeout((()=>n(!0)),e)));let A=0,_=!1;const T="op_prop_phone";function h(){0!=A&&(DeleteEntity(A),A=0,_=!1)}function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var N;!function(e){e[e.ON_CALL=0]="ON_CALL",e[e.PHONE_OPEN=1]="PHONE_OPEN",e[e.ON_CAMERA=2]="ON_CAMERA"}(N||(N={}));const d=new class{createAnimationInterval(){this.animationInterval=setInterval((async()=>{const e=PlayerPedId();this.onCall?this.handleCallAnimation(e):this.phoneOpen&&!this.onCamera&&this.handleOpenAnimation(e)}),250)}setPhoneState(e,n){switch(e){case N.ON_CALL:this.onCall=n;break;case N.PHONE_OPEN:this.phoneOpen=n;break;case N.ON_CAMERA:this.onCamera=n}this.onCall||this.phoneOpen?this.animationInterval||this.createAnimationInterval():this.animationInterval&&(clearInterval(this.animationInterval),this.animationInterval=null)}handleCallAnimation(e){IsPedInAnyVehicle(e,!0)?this.handleOnCallInVehicle(e):this.handleOnCallNormal(e)}handleOpenAnimation(e){IsPedInAnyVehicle(e,!0)?this.handleOpenVehicleAnim(e):this.handleOpenNormalAnim(e)}handleCallEndAnimation(e){global.isPhoneOpen?IsPedInAnyVehicle(e,!0)?this.handleCallEndVehicleAnim(e):this.handleCallEndNormalAnim(e):this.handleCloseAnimation(e)}handleCloseAnimation(e){IsPedInAnyVehicle(e,!0)?this.handleCloseVehicleAnim(e):this.handleCloseNormalAnim(e)}async openPhone(){this.onCall||((async()=>{if(h(),_)_&&console.log("prop already created");else{for(RequestModel(T);!HasModelLoaded(T);)await C(1);const e=PlayerPedId(),[n,t,a]=GetEntityCoords(e,!0);A=CreateObject(GetHashKey(T),n,t,a+.2,!0,!0,!0),SetNetworkIdCanMigrate(ObjToNet(A),!1);const o=GetPedBoneIndex(e,28422);AttachEntityToEntity(A,e,o,0,0,0,0,0,-0,!0,!0,!1,!0,1,!0),_=!0}})(),this.handleOpenAnimation(PlayerPedId())),this.setPhoneState(N.PHONE_OPEN,!0)}async closePhone(){this.setPhoneState(N.PHONE_OPEN,!1),this.onCall||(h(),this.handleCloseAnimation(PlayerPedId()))}async startPhoneCall(){this.handleCallAnimation(PlayerPedId()),this.setPhoneState(N.ON_CALL,!0)}async endPhoneCall(){this.handleCallEndAnimation(PlayerPedId()),this.setPhoneState(N.ON_CALL,!1)}async openCamera(){this.setPhoneState(N.ON_CAMERA,!0)}async closeCamera(){this.setPhoneState(N.ON_CAMERA,!1)}async loadAnimDict(e){for(RequestAnimDict(e);!HasAnimDictLoaded(e);)await C(100)}async handleOpenVehicleAnim(e){const n="anim@cellphone@in_car@ps",t="cellphone_text_in";await this.loadAnimDict(n),IsEntityPlayingAnim(e,n,t,3)||(emit("inventory:client:StoreWeapon"),TaskPlayAnim(e,n,t,7,-1,-1,50,0,!1,!1,!1))}async handleOpenNormalAnim(e){const n="cellphone@",t="cellphone_text_in";await this.loadAnimDict(n),IsEntityPlayingAnim(e,n,t,3)||(emit("inventory:client:StoreWeapon"),TaskPlayAnim(e,n,t,8,-1,-1,50,0,!1,!1,!1))}async handleCloseVehicleAnim(e){const n="anim@cellphone@in_car@ps";StopAnimTask(e,n,"cellphone_text_in",1),StopAnimTask(e,n,"cellphone_call_to_text",1),h()}async handleCloseNormalAnim(e){const n="cellphone@",t="cellphone_text_out";StopAnimTask(e,n,"cellphone_text_in",1),await C(100),await this.loadAnimDict(n),TaskPlayAnim(e,n,t,7,-1,-1,50,0,!1,!1,!1),await C(200),StopAnimTask(e,n,t,1),h()}async handleOnCallInVehicle(e){const n="anim@cellphone@in_car@ps",t="cellphone_call_listen_base";IsEntityPlayingAnim(e,n,t,3)||(await this.loadAnimDict(n),TaskPlayAnim(e,n,t,3,3,-1,49,0,!1,!1,!1))}async handleOnCallNormal(e){const n="cellphone@",t="cellphone_call_listen_base";IsEntityPlayingAnim(e,n,t,3)||(await this.loadAnimDict(n),TaskPlayAnim(e,n,t,3,3,-1,49,0,!1,!1,!1))}async handleCallEndVehicleAnim(e){const n="anim@cellphone@in_car@ps";StopAnimTask(e,n,"cellphone_call_listen_base",1),await this.loadAnimDict(n),TaskPlayAnim(e,n,"cellphone_call_to_text",1.3,5,-1,50,0,!1,!1,!1)}async handleCallEndNormalAnim(e){const n="cellphone@";IsEntityPlayingAnim(e,"cellphone@","cellphone_call_listen_base",49)&&(await this.loadAnimDict(n),TaskPlayAnim(e,n,"cellphone_call_to_text",2.5,8,-1,50,0,!1,!1,!1))}constructor(){p(this,"animationInterval",void 0),p(this,"onCall",!1),p(this,"phoneOpen",!1),p(this,"onCamera",!1)}};var O,P;!function(e){e[e.DECLINED=0]="DECLINED",e[e.BUSY_LINE=1]="BUSY_LINE"}(O||(O={})),function(e){e.INITIALIZE_CALL="phone:beginCall",e.START_CALL="phone:startCall",e.ACCEPT_CALL="phone:acceptCall",e.END_CALL="phone:endCall",e.WAS_ENDED="phone:callEnded",e.WAS_ACCEPTED="phone:callAccepted",e.REJECTED="phone:rejectCall",e.WAS_REJECTED="phone:callRejected",e.SET_CALLER="phone:setCaller",e.SET_CALL_MODAL="phone:callModal",e.SEND_ALERT="phone:callSetAlert",e.FETCH_CALLS="phone:dialer:fetchCalls",e.ADD_CALL="phone:dialer:addCall",e.UPDATE_CALL="phone:dialer:updateCall",e.MUTE_PLAYER_CALL="phone:mutePlayer"}(P||(P={}));const u=(e,n)=>onNet(e,n),I=(e,n,t)=>{if(t)return emitNet(e,t,n);emitNet(e,n)};function D(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const L=(e,n)=>{RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,n)},m=e=>{RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,(async(n,t)=>{global.isPlayerLoaded||await new Promise((e=>{const n=setInterval((()=>{global.isPlayerLoaded&&e(n)}),50)})).then((e=>clearInterval(e)));try{t(await oe.emitNetPromise(e,n))}catch(e){console.error("Error encountered while listening to resp. Error:",e),t({status:"error"})}}))},R=(e,n,t)=>{const a=typeof n;if(!t.includes(a))throw new Error(`Export ${e} was called with incorrect argument type (${t.join(", ")}. Passed: ${n}, Type: ${a})`)};function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}class M{static sendCallAction(e,n){SendNUIMessage({app:"CALL",method:e,data:n})}hasAnActiveCall(){return null!==this.currentCallData}isInCall(){return 0!==this.currentCall}isCallAccepted(){return this.currentCallData?.is_accepted}openCallModal(e){M.sendCallAction(P.SET_CALL_MODAL,e)}handleRejectCall(){this.currentCall>0||(this.currentCall=0,this.currentCallData=null,this.openCallModal(!1),M.sendCallAction(P.SET_CALLER,null))}handleStartCall(e,n,t,a){this.hasAnActiveCall()||this.isInCall()?emitNet(P.REJECTED,e,O.BUSY_LINE):(this.currentCall=-1,this.openCallModal(!0),SendNUIMessage({app:"CALL",method:P.SET_CALLER,data:{active:!0,transmitter:e,receiver:n,isTransmitter:t,accepted:!1,isUnavailable:a}}))}handleCallAccepted(e){this.currentCall=e.channelId,this.currentCallData=e,emitNet("voip:server:call:start",e.transmitter,e.receiver),M.sendCallAction(P.SET_CALLER,e)}handleEndCall(){this.isCallAccepted()&&emitNet("voip:server:call:end"),this.currentCall=0,this.currentCallData=null,this.openCallModal(!1),M.sendCallAction(P.SET_CALLER,null)}handleSendAlert(e){SendNUIMessage({app:"DIALER",method:P.SEND_ALERT,data:e})}constructor(){y(this,"currentCall",void 0),y(this,"currentCallData",void 0),this.currentCall=0,this.currentCallData=null}}const g=new M,b=async(e,n)=>{if(g.isInCall())n({status:"error",errorMsg:"CLIENT_TIMED_OUT"});else try{const t=await oe.emitNetPromise(P.INITIALIZE_CALL,e);if("ok"!==t.status)return n(t);d.startPhoneCall();const{transmitter:a,isTransmitter:o,receiver:l,isUnavailable:E}=t.data;g.handleStartCall(a,l,o,E),n({status:"ok"})}catch(e){console.error(e),n({status:"error",errorMsg:"CLIENT_TIMED_OUT"})}};L(P.INITIALIZE_CALL,b),u(P.START_CALL,(e=>{const{transmitter:n,isTransmitter:t,receiver:a,isUnavailable:o}=e;g.handleStartCall(n,a,t,o)})),L(P.ACCEPT_CALL,((e,n)=>{d.startPhoneCall(),I(P.ACCEPT_CALL,e),n({})})),u(P.WAS_ACCEPTED,(e=>{g.handleCallAccepted(e)})),L(P.MUTE_PLAYER_CALL,((e,n)=>{I(P.MUTE_PLAYER_CALL,e),n({})})),L(P.REJECTED,((e,n)=>{I(P.REJECTED,e),n({})})),onNet(P.WAS_REJECTED,(async()=>{g.handleRejectCall(),d.endPhoneCall()})),L(P.END_CALL,(async(e,n)=>{try{const t=await oe.emitNetPromise(P.END_CALL,e);"error"===t.status&&console.error(t.errorMsg),g.handleEndCall(),n({})}catch(e){console.error(e),n({status:"error",errorMsg:"CLIENT_TIMED_OUT"})}d.endPhoneCall()})),onNet(P.WAS_ENDED,(()=>{g.handleEndCall(),d.endPhoneCall()})),m(P.FETCH_CALLS),onNet(P.SEND_ALERT,(e=>{g.handleSendAlert(e)})),onNet(P.ADD_CALL,(e=>{c(P.ADD_CALL,e)})),onNet(P.UPDATE_CALL,(e=>{c(P.UPDATE_CALL,e)})),global.isPhoneOpen=!1,global.isPhoneDrowned=!1,global.isPhoneDisabled=!1,global.isPlayerLoaded=!1,global.isPlayerHasItem=!1,global.isBlackout=!1;const G=global.exports;function U(){return GlobalState.blackout||GlobalState.blackout_level>=3}onNet(a.SET_PLAYER_LOADED,(e=>{global.isPlayerLoaded=e,e||E("PHONE",a.UNLOAD_CHARACTER,{})})),RegisterKeyMapping(n.Cg.Z,"Afficher le téléphone","keyboard",n.Cg.x),RegisterCommand(n.Cg.Z,(async function(){if(global.isPhoneOpen)return await w();if(!LocalPlayer.state.isdead){if(global.isPhoneDrowned)return;if(global.isPhoneDisabled)return;if(U())return;if(n.cJ.am&&!await F())return}await H()}),!1),emit("chat:addSuggestion",`${n.Cg.Z}`,"Toggle displaying your cellphone");const f=()=>{let e=GetClockHours(),n=GetClockMinutes();return e<10&&(e=`0${e}`),n<10&&(n=`0${n}`),`${e}:${n}`},H=async()=>{global.isPhoneOpen=!0;const e=f();LocalPlayer.state.isdead||await d.openPhone(),emitNet(a.FETCH_CREDENTIALS),SetCursorLocation(.9,.922),E("PHONE",a.SET_VISIBILITY,!0),E("PHONE",a.SET_TIME,e),SetNuiFocus(!0,!0),SetNuiFocusKeepInput(!0),emit("phone:client:disableControlActions",!0)},w=async()=>{global.isPhoneOpen=!1,E("PHONE",a.SET_VISIBILITY,!1),LocalPlayer.state.isdead||await d.closePhone(),SetNuiFocus(!1,!1),SetNuiFocusKeepInput(!1),emit("phone:client:disableControlActions",!1)},v=async()=>{const e=!global.isPhoneDrowned&&!global.isPhoneDisabled&&global.isPlayerHasItem&&!global.isBlackout||!!LocalPlayer.state.isdead;E("PHONE",a.SET_AVAILABILITY,e),e||(global.isPhoneOpen&&await w(),g.isInCall()&&(g.handleEndCall(),await d.endPhoneCall()))},F=async()=>{const e=await Promise.resolve(G[n.cJ.yO][n.cJ.SN]());if("number"!=typeof e&&"boolean"!=typeof e)throw new Error("You must return either a boolean or number from your export function");return!!e};var V,Y,B;onNet(a.SEND_CREDENTIALS,((e,n)=>{E("SIMCARD",a.SET_NUMBER,e),E("SOCIETY_SIMCARD",a.SET_SOCIETY_NUMBER,n)})),on("onResourceStop",(e=>{e===GetCurrentResourceName()&&(E("PHONE",a.SET_VISIBILITY,!1),E("PHONE",a.SET_AVAILABILITY,!1),SetNuiFocus(!1,!1),d.endPhoneCall(),d.closePhone(),ClearPedTasks(PlayerPedId()),h())})),onNet("QBCore:Client:OnPlayerLoaded",(async()=>{E("PHONE","phoneRestart",{}),v(),E("PHONE",t.SET_EMERGENCY,LocalPlayer.state.isdead)})),onNet("QBCore:Player:SetPlayerData",(async e=>{"object"==typeof e.items&&(e.items=Object.values(e.items)),global.isPlayerHasItem=!!e.items.find((e=>"phone"===e.name)),v(),E("PHONE",t.SET_EMERGENCY,e.metadata.isdead)})),onNet("ems:client:onDeath",(()=>{g.handleEndCall(),d.endPhoneCall(),w(),E("PHONE",t.SET_EMERGENCY,!0),E("PHONE",a.SET_AVAILABILITY,!0)})),onNet("op-core:lsmc:client:revive",(async()=>{E("PHONE",t.SET_EMERGENCY,!1);const e=await F();E("PHONE",a.SET_AVAILABILITY,e)})),onNet("op-core:client:injury:death",(async e=>{E("PHONE",t.SET_DEAD,e)})),L(a.CLOSE_PHONE,(async(e,n)=>{await w(),n({})})),L(a.TOGGLE_KEYS,(async({keepGameFocus:e},n)=>{global.isPhoneOpen&&SetNuiFocusKeepInput(e),n({})})),L(t.LSMC_CALL,(async(e,n)=>{TriggerEvent("op-core:lsmc:client:call"),n({})})),L(t.UHU_CALL,(async(e,n)=>{TriggerServerEvent("op-core:lsmc:server:revive",null,!0,!0),w(),n({})})),setInterval((async()=>{const e=PlayerPedId(),n=IsPedSwimming(e);n&&!global.isPhoneDrowned?(global.isPhoneDrowned=!0,v()):!n&&global.isPhoneDrowned&&(global.isPhoneDrowned=!1,v()),global.isBlackout!=U()&&(global.isBlackout=U(),v())}),1e3),setInterval((()=>{const e=f();E("PHONE",a.SET_TIME,e)}),2e3),function(e){e[e.number=20]="number",e[e.display=255]="display"}(V||(V={})),function(e){e.GET_CONTACTS="phone:contact:get",e.ADD_CONTACT="phone:contact:add",e.ADD_CONTACT_SUCCESS="phone:contact:addSuccess",e.UPDATE_CONTACT="phone:contact:update",e.UPDATE_CONTACT_SUCCESS="phone:contact:updateSuccess",e.DELETE_CONTACT="phone:contact:delete",e.DELETE_CONTACT_SUCCESS="phone:contact:deleteSuccess"}(Y||(Y={})),m(Y.GET_CONTACTS),m(Y.ADD_CONTACT),m(Y.UPDATE_CONTACT),m(Y.DELETE_CONTACT),onNet(Y.ADD_CONTACT_SUCCESS,(e=>{r(Y.ADD_CONTACT_SUCCESS,e)})),onNet(Y.UPDATE_CONTACT_SUCCESS,(e=>{r(Y.UPDATE_CONTACT_SUCCESS,e)})),onNet(Y.DELETE_CONTACT_SUCCESS,(e=>{r(Y.DELETE_CONTACT_SUCCESS,e)})),function(e){e.ENTER_CAMERA="phone:camera:enter",e.TAKE_PHOTO="phone:camera:take",e.TOGGLE_CAMERA="phone:camera:toggle",e.EXIT_CAMERA="phone:camera:exit",e.CAMERA_EXITED="phone:cameraExited",e.TOGGLE_CONTROL_CAMERA="phone:camera:toggleControl",e.TAKE_PHOTO_SUCCESS="phone:TakePhotoSuccess",e.FETCH_PHOTOS="phone:photo:fetch",e.UPLOAD_PHOTO="phone:photo:upload",e.UPLOAD_PHOTO_SUCCESS="phone:photo:upload:success",e.DELETE_PHOTO="phone:photo:delete",e.DELETE_PHOTO_SUCCESS="phone:photo:delete:success"}(B||(B={}));const k=global.exports;let W=!1,x=!0,$=!1;L(B.ENTER_CAMERA,(async(e,n)=>{if(!global.isPhoneOpen)return await d.closeCamera(),await d.closePhone(),x=!1,void SetNuiFocus(!1,!1);for(await d.openCamera(),emit("phone:client:disableControlActions",!1),W=!0,CreateMobilePhone(1),CellCamActivate(!0,!0),emit(B.ENTER_CAMERA),n&&n(!0);W;)await C(0),!x&&IsControlJustPressed(0,176)&&(x=!0,SetNuiFocus(!0,!0)),x&&(DisableControlAction(0,1,!0),DisableControlAction(0,2,!0))})),L(B.TAKE_PHOTO,(async(e,n)=>{n(await j()),x=!0,SetNuiFocus(!0,!0),emit(`__cfx_nui:${B.ENTER_CAMERA}`)})),L(B.TOGGLE_CAMERA,(async(e,n)=>{var t;$=!$,t=$,Citizen.invokeNative("0x2491A93618B7D838",t),x=!0,SetNuiFocus(!0,!0),n(!0)})),L(B.TOGGLE_CONTROL_CAMERA,(async(e,n)=>{x=!x,SetNuiFocus(x,x),n(!0)})),L(B.EXIT_CAMERA,(async(e,n)=>{$=!1,x=!0,W=!1,SetNuiFocus(global.isPhoneOpen,global.isPhoneOpen),await J(),emit(B.EXIT_CAMERA),emit("phone:client:disableControlActions",global.isPhoneOpen),await d.closeCamera(),n(!0)}));const j=async()=>{ClearHelp(!0),await C(0);const e=await K();return emit("phone:client:disableControlActions",!0),await C(200),e},J=async()=>{!function(e,n={}){E(l.CAMERA,e,n)}(B.CAMERA_EXITED),await d.closeCamera(),emit("phone:client:disableControlActions",!0),DestroyMobilePhone(),CellCamActivate(!1,!1)},K=()=>new Promise(((e,t)=>{k["screenshot-basic"].requestScreenshotUpload(`${GetConvar("op_public_api_endpoint","https://api.op.zerator.com")}/graphql`,"GQL",{encoding:n.Wc.T,headers:{authorization:`Bearer ${LocalPlayer.state.opJWTToken}`}},(async a=>{try{let t=JSON.parse(a);for(const e of n.Wc.V)t=t[e];const o=await oe.emitNetPromise(B.UPLOAD_PHOTO,GetConvar("op_public_endpoint","https://op.zerator.com")+t);e(o)}catch(e){t(e.toString())}}))}));var Z,X;m(B.FETCH_PHOTOS),m(B.DELETE_PHOTO),onNet(B.DELETE_PHOTO_SUCCESS,(e=>{S(B.DELETE_PHOTO_SUCCESS,e)})),onNet(B.UPLOAD_PHOTO_SUCCESS,(e=>{S(B.UPLOAD_PHOTO_SUCCESS,e)})),function(e){e.FETCH_MESSAGE_CONVERSATIONS="phone:fetchMessageGroups",e.FETCH_MESSAGE_GROUPS_SUCCESS="phone:fetchMessageGroupsSuccess",e.FETCH_MESSAGE_GROUPS_FAILED="phone:fetchMessageGroupsFailed",e.CREATE_MESSAGE_CONVERSATION="phone:createMessageGroup",e.CREATE_MESSAGE_CONVERSATION_SUCCESS="phone:createMessageConversationSuccess",e.UPDATE_MESSAGE_CONVERSATION_SUCCESS="phone:updateMessageConversationSuccess",e.CREATE_MESSAGE_GROUP_SUCCESS="phone:createMessageGroupSuccess",e.CREATE_MESSAGE_GROUP_FAILED="phone:createMessageGroupFailed",e.SEND_MESSAGE="phone:sendMessage",e.SEND_MESSAGE_SUCCESS="phone:sendMessageSuccess",e.SEND_MESSAGE_FAILED="phone:sendMessageFailed",e.FETCH_MESSAGES="phone:fetchMessages",e.FETCH_MESSAGES_SUCCESS="phone:fetchMessagesSuccess",e.FETCH_MESSAGES_FAILED="phone:fetchMessagesFailed",e.FETCH_INITIAL_MESSAGES="phone:fetchInitialMessages",e.ACTION_RESULT="phone:setMessagesAlert",e.CREATE_MESSAGE_BROADCAST="createMessagesBroadcast",e.SET_MESSAGE_READ="phone:setReadMessages",e.DELETE_CONVERSATION="phone:deleteConversation",e.GET_POSITION="phone:getCurrentPosition",e.GET_DESTINATION="phone:getCurrentDestination",e.SET_WAYPOINT="phone:setWaypoint",e.SET_CONVERSATION_ARCHIVED="phone:setConversationArchived"}(Z||(Z={})),m(Z.FETCH_MESSAGE_CONVERSATIONS),m(Z.FETCH_MESSAGES),m(Z.CREATE_MESSAGE_CONVERSATION),m(Z.DELETE_CONVERSATION),m(Z.SEND_MESSAGE),m(Z.SET_MESSAGE_READ),m(Z.SET_CONVERSATION_ARCHIVED),L(Z.SET_WAYPOINT,(async(e,n)=>{0!==e.x&&0!==e.y&&SetNewWaypoint(parseInt(e.x),parseInt(e.y)),n({})})),L(Z.GET_POSITION,(async(e,n)=>{const[t,a]=GetEntityCoords(PlayerPedId(),!0);n({data:{x:t,y:a}})})),L(Z.GET_DESTINATION,(async(e,n)=>{const[t,a]=GetBlipInfoIdCoord(GetFirstBlipInfoId(8));n({data:{x:t,y:a}})})),onNet(Z.SEND_MESSAGE_SUCCESS,(e=>{s(Z.SEND_MESSAGE_SUCCESS,e)})),onNet(Z.CREATE_MESSAGE_BROADCAST,(e=>{s(Z.CREATE_MESSAGE_BROADCAST,e)})),onNet(Z.CREATE_MESSAGE_CONVERSATION_SUCCESS,(e=>{s(Z.CREATE_MESSAGE_CONVERSATION_SUCCESS,e)})),onNet(Z.UPDATE_MESSAGE_CONVERSATION_SUCCESS,(e=>{s(Z.UPDATE_MESSAGE_CONVERSATION_SUCCESS,e)})),function(e){e.GET_AVATAR="phone:getAvatar",e.UPDATE_PICTURE="phone:updateProfilePicture"}(X||(X={})),m(X.GET_AVATAR),m(X.UPDATE_PICTURE);const q=global.exports;var z,Q,ee,ne,te,ae;q("openApp",(e=>{R("openApp",e,["string"]),E("PHONE",a.OPEN_APP,e)})),q("setPhoneVisible",(async e=>{R("setPhoneVisible",e,["boolean","number"]);const n=global.isPhoneDisabled,t=global.isPhoneOpen;n&&!e&&t||(e?await H():await w())})),q("isPhoneVisible",(()=>global.isPhoneOpen)),q("setPhoneFocus",(e=>{SetNuiFocus(e,e),SetNuiFocusKeepInput(e)})),q("setPhoneDisabled",(e=>{R("setPhoneVisible",e,["boolean","number"]);const n=!!e;global.isPhoneDisabled=n,v()})),q("isPhoneDisabled",(()=>global.isPhoneDisabled)),q("startPhoneCall",(e=>{R("startPhoneCall",e,["string"]),b({receiverNumber:e})})),q("stopPhoneCall",(async()=>{global.isPhoneOpen&&await w(),g.isInCall()&&(g.handleEndCall(),await d.endPhoneCall())})),function(e){e.FIVEM_EVENT_FETCH_BALANCE="phone:app:bank:fetchBalance",e.FIVEM_EVENT_UPDATE_BALANCE="phone:client:app:bank:updateBalance",e.GET_CREDENTIALS="phone:app:bank:getAccountData",e.SEND_CREDENTIALS="phone:app:bank:sendAccountData"}(z||(z={})),m(z.FIVEM_EVENT_FETCH_BALANCE),onNet(z.FIVEM_EVENT_UPDATE_BALANCE,(async(e,n,t)=>{E("BANK",z.SEND_CREDENTIALS,{name:e,account:n,balance:t})})),function(e){e[e.message=255]="message"}(Q||(Q={})),function(e){e.FETCH_NEWS="phone:app:news:fetchNews",e.RELOAD_NEWS="phone:app:news:reloadNews",e.CREATE_NEWS_BROADCAST="phone:app:news:createNewsBroadcast",e.API_NEWS_BROADCAST="op-api:server:AddFlashNews"}(ee||(ee={})),m(ee.FETCH_NEWS),onNet(ee.CREATE_NEWS_BROADCAST,(e=>{E(l.TWITCH_NEWS,ee.CREATE_NEWS_BROADCAST,e)})),onNet(ee.RELOAD_NEWS,(()=>{E(l.TWITCH_NEWS,ee.RELOAD_NEWS,null)})),function(e){e.FETCH_ALL_NOTES="phone:app:notes:fetchAllNotes",e.ADD_NOTE="phone:app:notes:addNote",e.DELETE_NOTE="phone:app:notes:deleteNote",e.UPDATE_NOTE="phone:app:notes:updateNote"}(ne||(ne={})),m(ne.FETCH_ALL_NOTES),m(ne.ADD_NOTE),m(ne.UPDATE_NOTE),m(ne.DELETE_NOTE),onNet(ne.ADD_NOTE,(e=>{i(ne.ADD_NOTE,e)})),onNet(ne.UPDATE_NOTE,(e=>{i(ne.UPDATE_NOTE,e)})),onNet(ne.DELETE_NOTE,(e=>{i(ne.DELETE_NOTE,e)})),function(e){e[e.message=255]="message"}(te||(te={})),function(e){e.UPDATE_SOCIETY_MESSAGE="phone:updateSocietyMessage",e.UPDATE_SOCIETY_MESSAGE_SUCCESS="phone:updateSocietyMessageSuccess",e.SEND_SOCIETY_MESSAGE="phone:sendSocietyMessage",e.FETCH_SOCIETY_MESSAGES="phone:fetchSocietyMessage",e.RESET_SOCIETY_MESSAGES="phone:resetSocietyMessage",e.SEND_SOCIETY_MESSAGE_SUCCESS="phone:sendSocietyMessageSuccess",e.CREATE_MESSAGE_BROADCAST="phone:createSocietyMessagesBroadcast"}(ae||(ae={})),m(ae.SEND_SOCIETY_MESSAGE),m(ae.FETCH_SOCIETY_MESSAGES),m(ae.RESET_SOCIETY_MESSAGES),m(ae.UPDATE_SOCIETY_MESSAGE),onNet(ae.CREATE_MESSAGE_BROADCAST,(e=>{E(l.SOCIETY_MESSAGES,ae.CREATE_MESSAGE_BROADCAST,e)})),onNet(ae.UPDATE_SOCIETY_MESSAGE_SUCCESS,(e=>{E(l.SOCIETY_MESSAGES,ae.UPDATE_SOCIETY_MESSAGE_SUCCESS,e)})),onNet(ae.RESET_SOCIETY_MESSAGES,(()=>{E(l.SOCIETY_MESSAGES,ae.RESET_SOCIETY_MESSAGES,null)}));const oe=new class{setSettings(e){this._settings={...this._defaultSettings,...e}}emitNetPromise(e,...n){return new Promise(((t,a)=>{let o=!1;setTimeout((()=>{o=!0,a(`${e} has timed out after ${this._settings.promiseTimeout} ms`)}),this._settings.promiseTimeout);const l=(()=>{let e="";for(let n=0;n<32;n+=1)switch(n){case 8:case 20:e+="-",e+=(16*Math.random()|0).toString(16);break;case 12:e+="-",e+="4";break;case 16:e+="-",e+=(4*Math.random()|8).toString(16);break;default:e+=(16*Math.random()|0).toString(16)}return e})(),E=`${e}:${l}`;emitNet(e,E,...n);const s=e=>{removeEventListener(E,s),o||t(e)};onNet(E,s)}))}constructor(e){D(this,"_settings",void 0),D(this,"_defaultSettings",{promiseTimeout:15e3}),this.setSettings(e)}}})();